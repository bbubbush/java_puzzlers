# 8번째 퍼즐 - Dos Equis

```{.java}
public class DosEquis {
	public static void main(String args[]) {
		char x = 'X';
		int i = 0;
		System.out.print(true ? x : 0);
		System.out.print(false ? i : x);
	}
}
```

Dos Equis는 멕시코에서 생산하는 맥주 이름이다. 이 맥주의 상표가 X가 두번 연속되는데, 이번 퀴즈의 출력이 XX라서 이런 이름이 붙었다.

얼핏보면 매우 간단하게 'XX'가 출력되고 끝날 것으로 예상된다. 하지만 실제 출력되는 값은 'X88'이다. 왜 처음에는 X를 출력하고 두번째는 88을 출력하게 되었을까?

핵심이 되는 내용을 정리하면 아래와 같다.

>조건 연산자의 최종 자료형을 결정하는 규칙은 엄청나게 많지만 중요한 3가지는 아래와 같다.
>1. 두 번째와 세 번째 피연산자의 자료형이 같다면 해당 자료형으로 결과를 낸다.
>2. byte, short, char 타입을 T자료형이라고 한다면 피연산자 중 하나가 T자료형이고 다른 하나가 T자료형으로 캐스팅이 가능한 int상수라면 T자료형으로 결과를 낸다.
>3. 만약 이것이 아니라면 '이항 숫자 확산'을 적용하고, 두 번째와, 세 번째 피연산자 중 큰 자료형으로 결과를 낸다.

첫 번째 출력문은 char와 int 자료형이라 2번 규칙에 따라 char 형태로 출력된다. 반면 두 번째 출력문은 i가 숫자이지만 상수가 아닌 변수이기 때문에 3번 조건이 적용되어 int형 결과를 출력한다.

i에 final을 주어 변수가 아닌 상수로 처리할 경우에는 char 타입으로 출력된다. 하지만 이런 해결방법이 중요한 것이 아니라. 혼합 자료형 연산을 피하는 것이 중요하다.

삼항식은 편리함 덕분에 자주사용하지만, 이런 경우에는 독이 될 수 있다. 위와 같은 배경지식이 없으면 이런 상황이 발생했을 때 강제캐스팅을 통해 단순히 자료형만 맞추게 되어 심각한 오류를 유발할 수 있다.

따라서 항상 삼항식 내의 데이터타입을 확인하여 통일시키는 코딩습관을 들여야 한다. 

[[ 소스코드 ]](https://github.com/bbubbush/java_puzzlers/blob/master/Part1_%ED%91%9C%ED%98%84%EC%8B%9D%ED%8D%BC%EC%A6%90/java/DosEquis.java)